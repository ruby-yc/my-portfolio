<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>

<h2 class="intro-title">CONTACT</h2>

<div class="contact-section">
  <h3>
    <a href="https://www.linkedin.com/in/yuchen822" target="_blank" style="color: inherit; text-decoration: none;">LinkedIn</a>
  </h3>
  <p class="contact-info">www.linkedin.com/in/yuchen822</p>
</div>

<div class="contact-section">
  <h3>
    <a href="https://qc.joinhandshake.com/profiles/yuchen_d" target="_blank" style="color: inherit; text-decoration: none;">Handshake</a>
  </h3>
  <p class="contact-info">qc.joinhandshake.com/profiles/yuchen_d</p>
</div>

<div class="contact-section">
  <h3>
    <a href="mailto:ruby.rt33@gmail.com" style="color: inherit; text-decoration: none;">Email</a>
  </h3>
  <p class="contact-info">ruby.rt33@gmail.com</p>
</div>

</body>

<script>
let lastSentHeight = 0;
let stabilityCheckCount = 0;
let lastCheckedHeight = 0;

function sendHeight() {
    const height = Math.max(
        document.body.scrollHeight,
        document.documentElement.scrollHeight
    );
    
    if (height !== lastSentHeight) {
        lastSentHeight = height;
        console.log('子頁面發送高度:', height);
        parent.postMessage({ type: 'setHeight', height }, '*');
    }
}

// 檢查頁面是否穩定（高度不再變化）
function checkStability() {
    const currentHeight = Math.max(
        document.body.scrollHeight,
        document.documentElement.scrollHeight
    );
    
    if (currentHeight === lastCheckedHeight) {
        stabilityCheckCount++;
        // 連續 3 次檢查高度相同，認為頁面穩定
        if (stabilityCheckCount >= 3) {
            sendHeight();
            clearInterval(stabilityInterval);
            console.log(' stable, height confirm');
        }
    } else {
        stabilityCheckCount = 0;
        lastCheckedHeight = currentHeight;
    }
}

// 初始載入後等待頁面穩定
let stabilityInterval;
window.addEventListener('load', () => {
    // load 後等待 800ms 再開始檢查穩定性
    setTimeout(() => {
        stabilityCheckCount = 0;
        lastCheckedHeight = Math.max(
            document.body.scrollHeight,
            document.documentElement.scrollHeight
        );
        // 每 200ms 檢查一次，確保高度穩定
        stabilityInterval = setInterval(checkStability, 200);
    }, 800);
});

// 接收父頁面請求時發送
window.addEventListener('message', (event) => {
    if (event.data?.type === 'getHeight') {
        sendHeight();
    }
});
</script>

</html>