<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Page Title</title>
  <link rel="stylesheet" href="style.css">
 
</head>
<body>

  <!-- 主標題 -->
  <h2 class="intro-title">INTRO</h2>

  <!-- 副標題 -->
  <h3>background</h3>
  
  <!-- 個人介紹文字 -->
  <p>Hi! Welcome to my personal website. My name is Ruby. I am currently pursuing a Bachelor's degree in Computer Science at Queens College (CUNY). I started my academic journey in Taiwan, studying Food Science and Physics at Fu Jen Catholic University. After transferring to my current university, my physics background opened doors to semiconductors and coding and that's when I discovered my passion for computer science.
  Moving to New York alone was a big step outside my comfort zone, but it's been incredibly rewarding. I genuinely enjoy connecting with people from different cultural backgrounds and professional fields. These conversations expose me to diverse perspectives and teach me something unique from everyone I meet. Being bilingual also helps me navigate diverse cultural and academic environments.
  I'm a strong believer in the power of teamwork, especially when it comes to innovation and creativity. There's something special about bringing together different strengths—when everyone contributes what they do best, the results can be remarkable.</p>

  <!-- 個人照片 -->
  <div class="intro-photo">
    <img src="images/selfie.JPG" alt="Ruby's photo"> <!-- 確認路徑正確 -->
  </div>

</body>

<script>
let lastSentHeight = 0;
let stabilityCheckCount = 0;
let lastCheckedHeight = 0;

function sendHeight() {
    const height = Math.max(
        document.body.scrollHeight,
        document.documentElement.scrollHeight
    );
    
    if (height !== lastSentHeight) {
        lastSentHeight = height;
        console.log('子頁面發送高度:', height);
        parent.postMessage({ type: 'setHeight', height }, '*');
    }
}

// 檢查頁面是否穩定（高度不再變化）
function checkStability() {
    const currentHeight = Math.max(
        document.body.scrollHeight,
        document.documentElement.scrollHeight
    );
    
    if (currentHeight === lastCheckedHeight) {
        stabilityCheckCount++;
        // 連續 3 次檢查高度相同，認為頁面穩定
        if (stabilityCheckCount >= 3) {
            sendHeight();
            clearInterval(stabilityInterval);
            console.log(' stable, height confirm');
        }
    } else {
        stabilityCheckCount = 0;
        lastCheckedHeight = currentHeight;
    }
}

// 初始載入後等待頁面穩定
let stabilityInterval;
window.addEventListener('load', () => {
    // load 後等待 800ms 再開始檢查穩定性
    setTimeout(() => {
        stabilityCheckCount = 0;
        lastCheckedHeight = Math.max(
            document.body.scrollHeight,
            document.documentElement.scrollHeight
        );
        // 每 200ms 檢查一次，確保高度穩定
        stabilityInterval = setInterval(checkStability, 200);
    }, 800);
});

// 接收父頁面請求時發送
window.addEventListener('message', (event) => {
    if (event.data?.type === 'getHeight') {
        sendHeight();
    }
});
</script>

</html>